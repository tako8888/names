<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SVG with D3</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script>

document.addEventListener('DOMContentLoaded', function() {

    var width = 960, height = 600;  // Define the size of the SVG element

    // Make sure this selects the SVG correctly
    var svg = d3.select("body").select("svg")
                .attr("width", width)
                .attr("height", height);
    // Populate dropdown with hardcoded values
    var select = d3.select("#nameSelect");
    select.append("option").text("Noah");
    select.append("option").text("Charlotte");



    var projection = d3.geoAlbersUsa()
        .translate([width / 2, height / 2])  // Centers the map in your SVG
        .scale(1000);  // Scales the map within your SVG

    var path = d3.geoPath()
        .projection(projection);

    d3.json('./data/usstates_merged.geojson').then(function(data) {
        console.log(data);

        var dataArray = data.features.map(function(d) { return d.properties.name_share_in_state; });


        var colorScale = d3.scaleSequential(d3.interpolateBlues)  // Or any other color interpolator
        .domain([d3.min(dataArray), d3.max(dataArray)]);  // Replace dataArray with your actual data range

        
    
        svg.selectAll("path")
           .data(data.features)
           .enter()
           .append("path")
           .attr("d", path)
           .attr("fill", function(d) { return colorScale(d.properties.name_share_in_state); })  // Use your data property
           .attr("stroke", "white");   // State borders
    }).catch(function(error) {
        console.log(error); // Log any error in case the file can't be loaded
    });

    
    



});

    </script>
  </head>
  <body>
    <h1>CHART TITLE</h1>
    <p>DESCRIPTION</p>
    <select id="nameSelect"></select>

    <div id="my-svg-chart"></div>
    <svg width="960" height="600"></svg>



  </body>
</html>